var t,e;!function(t){t.FADE_IN="fadeIn",t.FADE_OUT="fadeOut"}(t||(t={})),function(t){t.OPENING="opening",t.OPENED="opened",t.CLOSING="closing",t.CLOSED="closed"}(e||(e={}));class s{constructor(t){this.registeredEvents=[];const{element:s,trigger:i,config:n}=t;this.target=this.wrapContentIntoModalizedTarget(s),this.trigger=i,this.config=n?{...this.defaultConfig(),...n}:this.defaultConfig(),this.state=e.CLOSED,this.initialize()}show(){this.state===e.CLOSED&&(this.target.classList.add(this.config.animationIn),this.target.showModal(),this.target.setAttribute("opening",""),this.state=e.OPENING)}hide(){this.state===e.OPENED&&(this.target.classList.add(this.config.animationOut),this.target.setAttribute("closing",""),this.state=e.CLOSING)}destroy(){this.target.close(),this.registeredEvents.forEach((t=>{const{listener:e,eventType:s,action:i}=t;e.removeEventListener(s,i)})),this.target.parentElement?.removeChild(this.target)}wrapContentIntoModalizedTarget(t){const e=t?.parentElement||document.body,s=document.createElement("dialog");return s.classList.add("modalizer"),e.insertBefore(s,t),s.appendChild(t),s}initialize(){const{target:t,trigger:e,config:s}=this;this.registerEvent(t,"animationend",this.setStateOnAnimationEnd.bind(this)),this.registerEvent(t,"cancel",this.closeOnCancel.bind(this)),s?.closer&&this.registerEvent(s.closer,"click",this.hide.bind(this)),e&&this.registerEvent(e,"click",this.show.bind(this)),this.registeredEvents.forEach((t=>{const{listener:e,eventType:s,action:i}=t;e.addEventListener(s,i)})),s?.customClassName&&t.classList.add(s.customClassName),this.target.classList.add("modalizer--initialized")}registerEvent(t,e,s){this.registeredEvents.push({listener:t,eventType:e,action:s})}closeOnCancel(t){t.preventDefault(),this.config.closeOnEscKeyPress&&this.hide()}setStateOnAnimationEnd(t){if(!t.pseudoElement)switch(this.state){case e.OPENING:this.setAsOpened();break;case e.CLOSING:this.setAsClosed()}}setAsOpened(){this.target.removeAttribute("opening"),this.state=e.OPENED,this.target.classList.remove(this.config.animationIn)}setAsClosed(){this.target.close(),this.target.removeAttribute("closing"),this.state=e.CLOSED,this.target.classList.remove(this.config.animationOut)}defaultConfig(){return{animationIn:t.FADE_IN,animationOut:t.FADE_OUT,closeOnEscKeyPress:!0}}}export{s as Modalizer};